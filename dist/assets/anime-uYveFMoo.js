import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */const A="https://shikimori.one/api",I=document.getElementById("search"),L=document.getElementById("status"),f=document.getElementById("kind"),v=document.getElementById("order"),j=document.getElementById("searchBtn"),o=document.getElementById("loadMoreBtn"),l=document.getElementById("animeList"),d=document.getElementById("loading"),c=document.getElementById("error"),y=document.getElementById("animeModal");let g=1,u=!1;const E="image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjQ1MCIgdmlld0JveD0iMCAwIDMwMCA0NTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iNDUwIiBmaWxsPSIjRjBGMEYwIi8+CjxwYXRoIGQ9Ik0xNTAgMjI1QzE2Ni41NDMgMjI1IDE4MCAyMTEuNTQzIDE4MCAxOTVDMTgwIDE3OC40NTcgMTY2LjU0MyAxNjUgMTUwIDE2NUMxMzMuNDU3IDE2NSAxMjAgMTc4LjQ1NyAxMjAgMTk1QzEyMCAyMTEuNTQzIDEzMy40NTcgMjI1IDE1MCAyMjVaIiBmaWxsPSIjQ0VDRUNFIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iMjc1IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTk5OTkiPk5vIEltYWdlPC90ZXh0Pgo8L3N2Zz4K";function x(e=1){const n={limit:20,page:e},t=I.value.trim();t&&(n.search=t);const s=L.value;s&&(n.status=s);const i=f.value;i&&(n.kind=i);const a=v.value;return a&&(n.order=a),n}function B(e){return e.image&&e.image.original?e.image.original.startsWith("/")?`https://shikimori.one${e.image.original}`:e.image.original:E}function k(e){return{released:"Вышедшее",ongoing:"Онгоинг",anons:"Анонс"}[e]||e}function T(e){if(!e)return"—";const n=new Date(e).getFullYear();return isNaN(n)?"—":n}async function r(e=!1){if(!u)try{u=!0,d.classList.remove("hidden"),c.classList.add("hidden"),e||(g=1,l.innerHTML="");const n=x(g),t=new URLSearchParams;for(const p in n)t.set(p,n[p]);const s=`${A}/animes?${t.toString()}`;console.log("Request URL:",s);const i=await fetch(s,{headers:{"User-Agent":"MyAnimeApp/1.0 (user@example.com)"}});if(!i.ok)throw new Error(`Ошибка запроса: ${i.status} ${i.statusText}`);const a=await i.json();if(d.classList.add("hidden"),!a||a.length===0){e||M("Аниме не найдены.");return}C(a,e),a.length>=20?o.style.display="flex":o.style.display="none"}catch(n){d.classList.add("hidden"),M(n.message),console.error("Ошибка:",n)}finally{u=!1}}function M(e){c.textContent=`❌ ${e}`,c.classList.remove("hidden"),o.style.display="none"}function C(e,n=!1){n||(l.innerHTML=""),e.forEach(t=>{const s=document.createElement("div");s.className="anime-item";const i=B(t),a=T(t.aired_on);s.innerHTML=`
            <div class="anime-image">
                <img src="${i}" alt="${t.russian||t.name}" 
                     onerror="this.src='${E}'">
                ${t.score?`<div class="anime-score">★ ${t.score}</div>`:""}
            </div>
            <div class="anime-content">
                <h3 class="anime-title">${t.russian||t.name}</h3>
                ${t.japanese?`<p class="anime-japanese-title">${t.japanese[0]}</p>`:""}
                <div class="anime-info">
                    <span class="anime-episodes">Эпизоды: ${t.episodes||"?"}</span>
                    <span class="anime-status">${k(t.status)}</span>
                </div>
                <div class="anime-year">Год: ${a}</div>
            </div>
        `,s.addEventListener("click",()=>{N(t)}),l.appendChild(s)})}function N(e){const n=B(e);document.getElementById("modalImage").src=n,document.getElementById("modalImage").alt=e.russian||e.name,document.getElementById("modalImage").onerror=function(){this.src=E},document.getElementById("modalTitle").textContent=e.russian||e.name,e.japanese&&e.japanese.length>0?(document.getElementById("modalJapaneseTitle").textContent=e.japanese[0],document.getElementById("modalJapaneseTitle").style.display="block"):document.getElementById("modalJapaneseTitle").style.display="none";const t=e.score||"N/A";document.getElementById("modalScore").textContent=t==="0.0"?"N/A":t,document.getElementById("modalEpisodes").textContent=e.episodes||"?",document.getElementById("modalStatus").textContent=k(e.status),document.getElementById("modalYear").textContent=T(e.aired_on),document.getElementById("modalKind").textContent=e.kind?e.kind.toUpperCase():"—",e.url?(document.getElementById("modalShikimoriLink").href=`https://shikimori.one${e.url}`,document.getElementById("modalShikimoriLink").style.display="inline-block"):document.getElementById("modalShikimoriLink").style.display="none",y.classList.remove("hidden")}function h(){y.classList.add("hidden")}j.addEventListener("click",()=>r(!1));o.addEventListener("click",()=>{g++,r(!0)});document.querySelector(".modal-background").addEventListener("click",h);document.querySelector(".close").addEventListener("click",h);document.addEventListener("keydown",e=>{e.key==="Escape"&&!y.classList.contains("hidden")&&h()});I.addEventListener("keypress",e=>{e.key==="Enter"&&r(!1)});window.addEventListener("DOMContentLoaded",()=>{r(!1)});function m(){l.innerHTML="",c.classList.add("hidden"),d.classList.add("hidden"),o.style.display="none"}I.addEventListener("input",m);L.addEventListener("change",m);f.addEventListener("change",m);v.addEventListener("change",m);
